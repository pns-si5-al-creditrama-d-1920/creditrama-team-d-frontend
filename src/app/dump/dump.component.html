<mat-card class="transaction-errors">
  <mat-card-content>
    <p class="errors-h2">Transaction errors :</p>
    <section class="errors-section">
      <mat-slide-toggle
        (change)="setErrorState()"
        [(ngModel)]="currentErrorState"
        [checked]="currentErrorState"
        [disabled]="disabled"
        class="errors-margin">
        : Off/On
      </mat-slide-toggle>
      <mat-slider
        (change)="setErrorRate()"
        [(ngModel)]="errorRate"
        [disabled]=!currentErrorState aria-label="Error rate" class="slider"
        max="100"
        min="0"
        step="1"
        thumbLabel>
      </mat-slider>
      <p>{{errorRate}}%</p>
    </section>
  </mat-card-content>

</mat-card>
<br/>
<div class="mat-elevation-z8">
  <table [dataSource]="dataSource" mat-table>

    <ng-container matColumnDef="userId">
      <th *matHeaderCellDef mat-header-cell> UserId</th>
      <td *matCellDef="let element" mat-cell> {{element.userId}}</td>
    </ng-container>

    <ng-container matColumnDef="username">
      <th *matHeaderCellDef mat-header-cell> Username</th>
      <td *matCellDef="let element" mat-cell> {{element.username}} </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount">
      <th *matHeaderCellDef mat-header-cell> Bank accounts</th>
      <td *matCellDef="let element" mat-cell>
        <span *ngFor="let bankaccount of element.bankAccounts">
					{{bankaccount.iban}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount.balance">
      <th *matHeaderCellDef mat-header-cell> Bank account balances</th>
      <td *matCellDef="let element" mat-cell>
        <span *ngFor="let bankaccount of element.bankAccounts">
					{{bankaccount.balance}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="recipient">
      <th *matHeaderCellDef mat-header-cell> Recipients</th>
      <td *matCellDef="let element" mat-cell>
          <span *ngFor="let recipient of element.recipients">
					{{recipient.iban}} - {{recipient.firstName}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount.sourceId">
      <th *matHeaderCellDef mat-header-cell> Transaction source</th>
      <td *matCellDef="let element" mat-cell>
				<span *ngFor="let transac of element.bankTransactions">
					{{transac.sourceId}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount.destinationId">
      <th *matHeaderCellDef mat-header-cell> Transaction destination</th>
      <td *matCellDef="let element" mat-cell>
				<span *ngFor="let transac of element.bankTransactions">
					{{transac.destinationId}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount.amount">
      <th *matHeaderCellDef mat-header-cell> Transaction amount</th>
      <td *matCellDef="let element" mat-cell>
				<span *ngFor="let transac of element.bankTransactions">
					{{transac.amount}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
    <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
  </table>
</div>
<br/>
<div class="mat-elevation-z8">
  <table [dataSource]="transactions" mat-table>

    <ng-container matColumnDef="uuid">
      <th *matHeaderCellDef mat-header-cell>Transaction uuid</th>
      <td *matCellDef="let element" mat-cell> {{element.uuid}} </td>
    </ng-container>

    <ng-container matColumnDef="amount">
      <th *matHeaderCellDef mat-header-cell> Amount</th>
      <td *matCellDef="let element" mat-cell> {{element.amount}} </td>
    </ng-container>

    <ng-container matColumnDef="createdTransaction">
      <th *matHeaderCellDef mat-header-cell>Time (UTC)</th>
      <td *matCellDef="let element" mat-cell> {{element.createdTransaction}} </td>
    </ng-container>

    <ng-container matColumnDef="transactionState">
      <th *matHeaderCellDef mat-header-cell> Transaction state</th>
      <td *matCellDef="let element" mat-cell> {{element.transactionState}} </td>
    </ng-container>

    <ng-container matColumnDef="source">
      <th *matHeaderCellDef mat-header-cell>Source Iban</th>
      <td *matCellDef="let element" mat-cell> {{element.source.iban}} </td>
    </ng-container>

    <ng-container matColumnDef="dest">
      <th *matHeaderCellDef mat-header-cell>Destination Iban</th>
      <td *matCellDef="let element" mat-cell> {{element.dest.iban}} </td>
    </ng-container>
<!--
    <ng-container matColumnDef="bankAccount">
      <th *matHeaderCellDef mat-header-cell> Bank accounts</th>
      <td *matCellDef="let element" mat-cell>
        <span *ngFor="let bankaccount of element.bankAccounts">
					{{bankaccount.iban}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount.balance">
      <th *matHeaderCellDef mat-header-cell> Bank account balances</th>
      <td *matCellDef="let element" mat-cell>
        <span *ngFor="let bankaccount of element.bankAccounts">
					{{bankaccount.balance}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

      <ng-container matColumnDef="recipient">
          <th *matHeaderCellDef mat-header-cell> Recipients</th>
          <td *matCellDef="let element" mat-cell>
          <span *ngFor="let recipient of element.recipients">
					{{recipient.iban}} - {{recipient.firstName}} <br/>
					<mat-divider></mat-divider>
				</span>
          </td>
      </ng-container>

    <ng-container matColumnDef="bankAccount.sourceId">
      <th *matHeaderCellDef mat-header-cell> Transaction source</th>
      <td *matCellDef="let element" mat-cell>
				<span *ngFor="let transac of element.bankTransactions">
					{{transac.sourceId}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount.destinationId">
      <th *matHeaderCellDef mat-header-cell> Transaction destination</th>
      <td *matCellDef="let element" mat-cell>
				<span *ngFor="let transac of element.bankTransactions">
					{{transac.destinationId}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="bankAccount.amount">
      <th *matHeaderCellDef mat-header-cell> Transaction amount</th>
      <td *matCellDef="let element" mat-cell>
				<span *ngFor="let transac of element.bankTransactions">
					{{transac.amount}} <br/>
					<mat-divider></mat-divider>
				</span>
      </td>
    </ng-container>-->

    <tr *matHeaderRowDef="transactionColumns" mat-header-row></tr>
    <tr *matRowDef="let row; columns: transactionColumns;" mat-row></tr>
  </table>
</div>
